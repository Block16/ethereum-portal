<main>
	<h1 class="top-border head1 type2 main-head"
			[ngStyle]="theme.textStyle">Ethereum Portal</h1>
	<div *ngIf="currentAuth == AuthState.none"
			 class="grid">
		<div class="grid-cell">
			<h2 class="top-border"
					[ngStyle]="theme.textStyle">Select wallet</h2>
			<section class="section-content">
				<div class="wallets">
					<div class="wallet">
						<app-button class="wallet-icon"
											  (click)="metaMaskAuthState()"
											  accent>
							<!-- <img src="/assets/img/icons/metamask icon light.svg" alt=""> -->

							<div [hidden]="theme.isDark">
								<div class="svg-wrapper secondary-svg"
										 [inlineSVG]="'/assets/img/icons/inline-svg/metamask icon light.svg'"></div>
							</div>
							<div [hidden]="!theme.isDark">
								<div class="svg-wrapper secondary-svg"
										 [inlineSVG]="'/assets/img/icons/inline-svg/metamask icon.svg'"></div>
							</div>
						</app-button>
						<span class="head3"
									[ngStyle]="theme.accentTextStyle">Metamask</span>
					</div>
					<div class="wallet">
						<app-button class="wallet-icon"
								 				(click)="toggleAuthState(AuthState.ledger)"
								 				accent>
							<!-- <img src="/assets/img/icons/ledger icon light.svg" alt=""> -->
							<div class="svg-wrapper secondary-svg ledger" [inlineSVG]="'/assets/img/icons/inline-svg/ledger icon light.svg'"></div>
						</app-button>
						<span class="head3"
									[ngStyle]="theme.accentTextStyle">Ledger</span>
					</div>
					<div class="wallet">
						<app-button class="wallet-icon"
								 				(click)="trezorAuthState()"
								 				accent>
							<!-- <img src="/assets/img/icons/trezor icon light.svg" alt=""> -->
							<div class="svg-wrapper secondary-svg trezor" [inlineSVG]="'/assets/img/icons/inline-svg/trezor icon light.svg'"></div>
						</app-button>
						<span class="head3"
									[ngStyle]="theme.accentTextStyle">Trezor</span>
					</div>
					<div class="wallet">
						<app-button class="wallet-icon"
								 				(click)="toggleAuthState(AuthState.bitbox)"
								 				accent>
							<!-- <img src="/assets/img/icons/digital bitbox icon light.svg" alt=""> -->
							<div class="svg-wrapper secondary-svg digital-bitbox" [inlineSVG]="'/assets/img/icons/inline-svg/digital bitbox icon light.svg'"></div>
						</app-button>
						<span class="head3"
									[ngStyle]="theme.accentTextStyle">Digital Bitbox</span>
					</div>

					<div class="wallet">
						<app-button class="wallet-icon"
						accent>
							<app-utc-file-form (privateKey)="utcAuthState($event)"></app-utc-file-form>
						  <!-- <img src="/assets/img/icons/utc icon light.svg" alt=""> -->
							<div class="svg-wrapper secondary-svg utc" [inlineSVG]="'/assets/img/icons/inline-svg/utc icon light.svg'"></div>
						</app-button>
						<span class="head3"
									[ngStyle]="theme.accentTextStyle">.UTC file</span>
					</div>
				</div>
				<br>
				<br>
				<app-toggle-section [title]="'Non-recommended'">
	        <app-private-key-form (privateKey)="privateKeyAuthState($event)"></app-private-key-form>
				</app-toggle-section>
			</section>

			<!-- <app-button>button</app-button>
			<app-button accent small>accent button</app-button> -->
		</div>
		<div class="grid-cell">
			<h2 class="top-border"
					[ngStyle]="theme.textStyle">Don't have a wallet?</h2>
			<section class="section-content">
				<div class="wallet-info-entry">
					<div class="wallet-icon">
						<div [hidden]="!theme.isDark">
							<div class="svg-wrapper primary-svg"
									 [inlineSVG]="'/assets/img/icons/inline-svg/metamask icon light.svg'"></div>
						</div>
						<div [hidden]="theme.isDark">
							<div class="svg-wrapper primary-svg"
									 [inlineSVG]="'/assets/img/icons/inline-svg/metamask icon.svg'"></div>
						</div>
					</div>
					<h3 class="wallet-name no-bottom-margin">MetaMask</h3>
					<p class="wallet-info no-bottom-margin">
						MetaMask is a free and convenient browser extension for Chrome, Firefox, and Opera. MetaMask is also available for Firefox on Android.
					</p>
					<app-inline-button class="wallet-link"
														 href="https://metamask.io/">
						Install MetaMask
					</app-inline-button>
				</div>
				<div class="wallet-info-entry">
					<div class="wallet-icon">
							<div class="svg-wrapper primary-svg utc" [inlineSVG]="'/assets/img/icons/inline-svg/utc icon.svg'"></div>
					</div>
					<h3 class="wallet-name no-bottom-margin">.UTC file</h3>
					<p class="wallet-info no-bottom-margin">
						A .UTC file is a passworded file that you save to your computer and can use to access your Ethereum wallet.
					</p>
					<app-inline-button class="wallet-link"
														 href="https://www.ledgerwallet.com/">
						Generate .UTC file
					</app-inline-button>
				</div>
				<div class="wallet-info-entry">
					<div class="wallet-icon">
							<div class="svg-wrapper primary-svg ledger" [inlineSVG]="'/assets/img/icons/inline-svg/ledger icon.svg'"></div>
					</div>
					<h3 class="wallet-name no-bottom-margin">Ledger</h3>
					<p class="wallet-info no-bottom-margin">
						Ledger is a hardware wallet designed for secure long-term cryptocurrency storage.
					</p>
					<app-inline-button class="wallet-link"
														 href="https://www.ledgerwallet.com/">
						View product page
					</app-inline-button>
				</div>
				<div class="wallet-info-entry">
					<div class="wallet-icon">
							<div class="svg-wrapper primary-svg trezor" [inlineSVG]="'/assets/img/icons/inline-svg/trezor icon.svg'"></div>
					</div>
					<h3 class="wallet-name no-bottom-margin">Trezor</h3>
					<p class="wallet-info no-bottom-margin">
						Trezor is a hardware wallet designed for secure long-term cryptocurrency storage.
					</p>
					<app-inline-button class="wallet-link"
														 href="https://trezor.io/">
						View product page
					</app-inline-button>
				</div>
			</section>
		</div>
	</div>

	<div *ngIf="currentAuth != AuthState.none" class="grid">
		<div class="grid-cell">
			<h2 class="top-border head2 type2">View</h2>
			<section class="section-content">
				<div class="caption ">Address</div>
				<p class="lining-proportional break-all my-address">0x{{ ethereumAddress }}</p>
				
				<div class="token eth">
					<div class="token-symbol caption no-wrap">
						ETH															
					</div>
					<p class="token-amount lining-proportional no-wrap"
						 [innerHTML]="5000.123456789 | fadeDigits">
					</p>
					<p class="token-denomination lining-proportional op4 no-wrap"
						 [ngStyle]="theme.primaryTextStyle"
						 *ngIf="userPreferences['additionalDenomination'] != 'None'">
						{{ denominate('0x684654351',
													50,
													userPreferences['additionalDenomination']) }}
					</p>
				</div>
				<app-toggle-section [title]="'Tokens'"
														[open]="true">
					<div class="tokens">
						<div class="token"
								 [ngClass]="{ 'ETH': token.symbol == 'ETH' }"
								 *ngFor="let token of assets">
							<div class="token-icon">
								<div class="icon-container"
										 *ngIf="tokenHasIcon(token.contractAddress)">
								 	<div class="svg-wrapper accent-svg"
										 	 [inlineSVG]="'assets/img/icons/coins/'+token.symbol.toLowerCase()+'.svg'"></div>
								 </div>
								<div class="icon-container no-icon"
										 [ngStyle]="theme.accentMainStyle"
										 *ngIf="!tokenHasIcon(token.contractAddress)">
										 <span>{{ getTokenAbbreviation(token.symbol) }}</span>
								 </div>
							</div>
							<div class="token-symbol caption no-wrap">
								{{ token.symbol }}
							</div>
							<p class="token-amount lining-proportional no-wrap"
								 [innerHTML]="token.amount | fadeDigits:2">
							</p>
							<p class="token-denomination lining-proportional op4 no-wrap"
								 [ngStyle]="theme.primaryTextStyle"
								 *ngIf="userPreferences['additionalDenomination'] != 'None'">
								
								{{ denominate('0x684654351',
															50,
															userPreferences['additionalDenomination']) }}
							</p>
						</div>
					</div>
				</app-toggle-section>
				<app-toggle-section [title]="'QR'">
					<ngx-kjua
							class="qr"
					    [text]="'0x' + ethereumAddress"
					    [renderAsync]="false"
					    [crisp]="true"
					    [ecLevel]="'L'"
					    [size]="'250'"
					    [fill]="theme.primaryColor"
					    [back]="'transparent'"
					  ></ngx-kjua>
				</app-toggle-section>

			</section>
		</div>
		<div class="grid-cell">
      <app-send-form [theme]="theme" (ethereumTransaction)="onTransactionGenerated($event)"></app-send-form>
		</div>
		<div class="grid-cell">
			<h2 class="top-border head2 type2">History</h2>
			<section class="section-content">
				<app-transaction-list></app-transaction-list>
			</section>
		</div>
	</div>

</main>

<div class="new-transaction-circle"
		 [ngClass]="{ 'small': newTransactionToDock }"
		 [ngStyle]="newTransactionCircleStyle">
		 <div class="circle-fill"
				  [ngStyle]="theme.processingBackgroundStyle"></div>
</div>
<div class="new-transaction" [ngStyle]="newTransactionStyle" *ngIf="showApproveTransaction">
	<div class="content">
		<h1 class="top-border" [ngStyle]="theme.newTransactionTextStyle">Approve transaction</h1>
		<section class="section-content"
						 [ngStyle]="theme.newTransactionTextStyle">
			<h3 class="type2">Transaction will send immediately after approval on your {{ currentAuth }}</h3>
			<span class="caption">To</span><br>
			<p class="lining-proportional">{{ newTransaction.toAddress }}</p>
			<span class="caption">From</span><br>
			<p class="lining-proportional">0x{{ ethereumAddress }}</p>
			<span class="caption">Amount</span><br>
			<p class="lining-proportional">{{ newTransaction.valueToBN().toString(10) }} {{ newTransaction.asset.symbol }}</p>
			<span class="caption">Estimated transaction fees</span><br>
			<p class="lining-proportional">{{ newTransaction.transactionFeesGwei().toString(10) }} Gwei, ({{ newTransaction.transactionFees().toString(10) }} ETH)</p>
			<app-button>Send</app-button>
		</section>
	</div>
</div>

<div #_recentTransactions
		 class="recent-transactions"
		 (click)="setShowSidebar(true)">
	<div *ngFor="let tx of recentTransactions"
				class="transaction">
		<transaction-dot [status]="tx.status"></transaction-dot>
	</div>
</div>

<modal [(visible)]="showTestModal"
			 [title]="'Title'">hello</modal>

<!-- <div class="dev-buttons">
	<app-button class="dev-button"
			 [ngStyle]="theme.buttonStyle"
			 (click)="showTestModal = !showTestModal">Show test modal</app-button>
	<app-button class="dev-button"
			 [ngStyle]="theme.buttonStyle"
		 	 (click)="showApproveNewTransaction()">Generate transaction</app-button>
	<app-button class="dev-button"
			 [ngStyle]="theme.buttonStyle"
		 	 (click)="transactionSigned()">Sign transaction</app-button>
	<app-button class="dev-button"
			 [ngStyle]="theme.buttonStyle"
		 	 (click)="notificationService.message('hello ')">Add notification</app-button>
</div>
 -->