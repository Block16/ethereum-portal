<main>
	<h1 class="top-border head1 type2 main-head"
			[ngStyle]="theme.textStyle">Ethereum Portal</h1>
	<div *ngIf="currentAuth == AuthState.none"
			 class="grid">
		<div class="grid-cell">
			<h2 class="top-border"
					[ngStyle]="theme.textStyle">Select wallet</h2>
			<section class="section-content">
				<div class="wallets">
					<div class="wallet">
						<app-button class="wallet-icon"
											  (click)="metaMaskAuthState()"
											  accent>
							<!-- <img src="/assets/img/icons/metamask icon light.svg" alt=""> -->
							
							<div [hidden]="theme.isDark">
								<div class="svg-wrapper secondary-svg"
										 [inlineSVG]="'/assets/img/icons/inline-svg/metamask icon light.svg'"></div>
							</div>
							<div [hidden]="!theme.isDark">
								<div class="svg-wrapper secondary-svg"
										 [inlineSVG]="'/assets/img/icons/inline-svg/metamask icon.svg'"></div>
							</div>
						</app-button>
						<span class="head3"
									[ngStyle]="theme.accentTextStyle">Metamask</span>
					</div>
					<div class="wallet">
						<app-button class="wallet-icon"
								 				(click)="toggleAuthState(AuthState.ledger)"
								 				accent>
							<!-- <img src="/assets/img/icons/ledger icon light.svg" alt=""> -->
							<div class="svg-wrapper secondary-svg ledger" [inlineSVG]="'/assets/img/icons/inline-svg/ledger icon light.svg'"></div>
						</app-button>
						<span class="head3"
									[ngStyle]="theme.accentTextStyle">Ledger</span>
					</div>
					<div class="wallet">
						<app-button class="wallet-icon"
								 				(click)="trezorAuthState()"
								 				accent>
							<!-- <img src="/assets/img/icons/trezor icon light.svg" alt=""> -->
							<div class="svg-wrapper secondary-svg trezor" [inlineSVG]="'/assets/img/icons/inline-svg/trezor icon light.svg'"></div>
						</app-button>
						<span class="head3"
									[ngStyle]="theme.accentTextStyle">Trezor</span>
					</div>
					<div class="wallet">
						<app-button class="wallet-icon"
								 				(click)="toggleAuthState(AuthState.bitbox)"
								 				accent>
							<!-- <img src="/assets/img/icons/digital bitbox icon light.svg" alt=""> -->
							<div class="svg-wrapper secondary-svg digital-bitbox" [inlineSVG]="'/assets/img/icons/inline-svg/digital bitbox icon light.svg'"></div>
						</app-button>
						<span class="head3"
									[ngStyle]="theme.accentTextStyle">Digital Bitbox</span>
					</div>

					<div class="wallet">
						<app-button class="wallet-icon"
						accent>
							<app-utc-file-form (privateKey)="utcAuthState($event)"></app-utc-file-form>
						  <!-- <img src="/assets/img/icons/utc icon light.svg" alt=""> -->
							<div class="svg-wrapper secondary-svg utc" [inlineSVG]="'/assets/img/icons/inline-svg/utc icon light.svg'"></div>
						</app-button>
						<span class="head3"
									[ngStyle]="theme.accentTextStyle">.UTC file</span>
					</div>
				</div>
				<br>
			</section>
			
			<app-toggle-section [title]="'Non-recommended'">
        <app-private-key-form (privateKey)="privateKeyAuthState($event)"></app-private-key-form>
				<button class="button"
								(click)="currentAuth = AuthState.metamask">FAKE AUTH</button>
				<br><br>
				<button class="button"
								(click)="showTestModal = !showTestModal">show test modal</button>
			</app-toggle-section>
			<!-- <app-button>button</app-button>
			<app-button accent small>accent button</app-button> -->
		</div>
		<div class="grid-cell">
			<h2 class="top-border"
					[ngStyle]="theme.textStyle">Don't have a wallet?</h2>
		</div>
	</div>

	<div *ngIf="currentAuth != AuthState.none" class="grid">
		<div class="grid-cell">
			<h2 class="top-border head2 type2">View</h2>
			<section class="section-content">
				<div class="caption ">Address</div>
				<p class="lining-proportional">0x{{ ethereumAddress }}</p>
				
				<div class="token eth">
					<div class="token-icon">
						<div class="icon-container op3"
								 [ngStyle]="theme.accentBackgroundStyle"></div>
					</div>
					<div class="token-symbol caption">
						ETH
					</div>
					<p class="token-amount lining-proportional">
						5,002
					</p>
					<p class="token-denomination lining-proportional op4"
						 [ngStyle]="theme.primaryTextStyle"
						 *ngIf="userPreferences['additionalDenomination'] != 'None'">
						$35,000 USD
					</p>
				</div>
				<app-toggle-section [title]="'Tokens'"
														[open]="true">
					<div class="tokens">
						<div class="token"
								 *ngFor="let token of assets">
							<div class="token-icon">
								<div class="icon-container op3"
										 [ngStyle]="theme.accentBackgroundStyle"></div>
							</div>
							<div class="token-symbol caption">
								{{ token.name }}
							</div>
							<p class="token-amount lining-proportional">
								{{ token.amount }}
							</p>
							<p class="token-denomination lining-proportional op4"
								 [ngStyle]="theme.primaryTextStyle"
								 *ngIf="userPreferences['additionalDenomination'] != 'None'">
								$35,000 USD
							</p>
						</div>
					</div>
				</app-toggle-section>
				<app-toggle-section [title]="'QR'">
					<ngx-kjua
					    [text]="'0x' + ethereumAddress"
					    [renderAsync]="false"
					    [crisp]="true"
					    [ecLevel]="'L'"
					    [size]="'250'"
					    [fill]="theme.primaryColor"
					    [back]="'transparent'"
					  ></ngx-kjua>
				</app-toggle-section>

        <loading-icon></loading-icon>
			</section>
		</div>
		<div class="grid-cell">
      <app-send-form [theme]="theme"></app-send-form>
		</div>
		<div class="grid-cell">
			<h2 class="top-border head2 type2">History</h2>
			<section class="section-content">
				<app-transaction-list></app-transaction-list>
			</section>
		</div>
	</div>

</main>

<div class="new-transaction-circle"
		 [ngClass]="{ 'small': newTransactionToDock }"
		 [ngStyle]="newTransactionCircleStyle">
		 <div class="circle-fill"
				  [ngStyle]="theme.processingBackgroundStyle"></div>
</div>
<div class="new-transaction"
		 [ngStyle]="newTransactionStyle">
	<div class="content">
		<h1 class="top-border"
				[ngStyle]="theme.newTransactionTextStyle">Approve transaction</h1>
		<section class="section-content"
						 [ngStyle]="theme.newTransactionTextStyle">
			<h3 class="type2">Transaction will send immediately after approval on your [auth method]</h3>
			<span class="caption">To</span><br>
			<p class="lining-proportional">{{newTransaction.toAddress}}</p>
			<span class="caption">From</span><br>
			<p class="lining-proportional">{{newTransaction.fromAddress}}</p>
			<span class="caption">Amount</span><br>
			<p class="lining-proportional">{{newTransaction.amount}} {{newTransaction.token}}</p>
			<span class="caption">Estimated transaction fees</span><br>
			<p class="lining-proportional">.0008 ETH</p>
		</section>
	</div>
</div>

<div #_recentTransactions
		 class="recent-transactions"
		 (click)="setShowSidebar(true)">
	<div *ngFor="let tx of recentTransactions"
				class="transaction">
		<transaction-dot [status]="tx.status"></transaction-dot>
	</div>
</div>

<modal [(visible)]="showTestModal"
			 [title]="'Title'">hello</modal>

<div class="dev-buttons">
	<app-button class="dev-button"
			 [ngStyle]="theme.buttonStyle"
			 (click)="showTestModal = !showTestModal">Show test modal</app-button>
	<app-button class="dev-button"
			 [ngStyle]="theme.buttonStyle"
		 	 (click)="showApproveNewTransaction()">Generate transaction</app-button>
	<app-button class="dev-button"
			 [ngStyle]="theme.buttonStyle"
		 	 (click)="transactionSigned()">Sign transaction</app-button>
</div>
